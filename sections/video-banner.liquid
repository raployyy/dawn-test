{% if section.settings.video_url != blank %}
  {% assign video_url = section.settings.video_url %}
  {% if video_url contains 'youtube.com' or video_url contains 'youtu.be' %}
    {% assign video_id = video_url | split: 'v=' | last | split: '&' | first %}
    <div class="video-banner" style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
      <iframe
        src="https://www.youtube.com/embed/{{ video_id }}"
        frameborder="0"
        allow="autoplay; encrypted-media"
        allowfullscreen
        style="position:absolute; top:0; left:0; width:100%; height:100%;"
      >
      </iframe>
    </div>
  {% elsif video_url contains 'tiktok.com' %}
    {% assign video_id = video_url | split: '/video/' | last | split: '?' | first %}
    <div class="video-banner" style="position:relative; padding-bottom:56.25%; height:0; overflow:hidden;">
      <iframe
        src="https://www.tiktok.com/embed/{{ video_id }}"
        frameborder="0"
        allow="autoplay; encrypted-media"
        allowfullscreen
        style="position:absolute; top:0; left:0; width:100%; height:100%;"
      >
      </iframe>
    </div>
  {% elsif video_url contains 'instagram.com' %}
    <p>Instagram videos are not supported for embedding.</p>
  {% else %}
    <p>Unsupported video URL.</p>
  {% endif %}
{% endif %}

{% schema %}
{
  "name": "Video Banner",
  "settings": [
    {
      "type": "text",
      "id": "video_url",
      "label": "Video URL"
    }
  ],
  "presets": [
    {
      "name": "Video Banner",
      "category": "Media"
    }
  ]
}
{% endschema %}
